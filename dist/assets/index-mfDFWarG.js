import{u as R,h as U,r as u,i as N,X as L,f as n,Y as F,M as C,R as S,Z as k,_ as M,j as e,B as d,C as j,e as y,$ as w,b as O,d as _,U as Y,T as m}from"./index-DFBcCm7V.js";import{g as b,M as I}from"./messages-keBJKTKK.js";import{P as A,T as q}from"./trash-2-st2Kg0im.js";import{S as P}from"./search-Y32gwDqf.js";const B=()=>{const o=R(),l=U(),[i,p]=u.useState(""),[t,h]=u.useState("all"),r=N(L),x=u.useMemo(()=>{let a=r;if(t!=="all"&&(a=a.filter(s=>s.category===t)),i.trim()){const s=i.toLowerCase();a=a.filter(c=>c.name.toLowerCase().includes(s)||c.description.toLowerCase().includes(s))}return a},[r,i,t]);return{searchTerm:i,setSearchTerm:p,categoryFilter:t,setCategoryFilter:h,filteredTemplates:x,handleDelete:async a=>{if(confirm("Are you sure you want to delete this template? This action cannot be undone."))try{await l(k(a)).unwrap(),n.success(I.SUCCESS.DELETED)}catch(s){n.error(b(s,"Failed to delete template"))}},handleUseTemplate:async a=>{try{const s=r.find(f=>f.id===a);if(!s){n.error("Template not found");return}await l(F(a));const c={title:`${s.name} Survey`,purpose:s.description,targetAudience:s.targetAudience,openDate:new Date().toISOString().slice(0,16),closeDate:new Date(Date.now()+10080*60*1e3).toISOString().slice(0,16),questions:s.questions.map((f,E)=>({...f,id:`question_${Date.now()}_${E}`,order:E}))},v=await l(C(c));C.fulfilled.match(v)&&(n.success("Survey created from template"),o(S.SURVEYS.EDIT.replace(":id",v.payload.id)))}catch(s){n.error(b(s,"Failed to create survey from template"))}}}},D={[m.TRAINING_FEEDBACK]:"Training Feedback",[m.SKILL_ASSESSMENT]:"Skill Assessment",[m.PROCESS_MATURITY]:"Process Maturity",[m.WORKSHOP_READINESS]:"Workshop Readiness"};function V(){const o=R(),l=U(),i=N(L),p=N(s=>s.templates.isLoading),{searchTerm:t,setSearchTerm:h,categoryFilter:r,setCategoryFilter:x,filteredTemplates:g,handleDelete:T,handleUseTemplate:a}=B();return u.useEffect(()=>{l(M())},[l]),p&&i.length===0?e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"},s))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Survey Templates"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Use pre-built templates to quickly create surveys"})]}),e.jsxs(d,{onClick:()=>o(S.SURVEYS.CREATE),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Create Custom Survey"]})]}),e.jsx(j,{children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:t,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("select",{value:r,onChange:s=>x(s.target.value),className:"px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Categories"}),Object.entries(D).map(([s,c])=>e.jsx("option",{value:s,children:c},s))]})]})})}),g.length===0?e.jsx(j,{children:e.jsxs(y,{className:"py-12 text-center",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:t||r!=="all"?"No templates match your search":"No templates available"}),!t&&r==="all"&&e.jsxs(d,{onClick:()=>o(S.SURVEYS.CREATE),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Create Your First Template"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsxs(j,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(O,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(_,{className:"text-lg",children:s.name}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>T(s.id),className:"text-destructive",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D[s.category]})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.questions.length," questions"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Used ",s.usageCount," times"]})]})]}),e.jsx(d,{onClick:()=>a(s.id),className:"w-full",children:"Use Template"})]})]},s.id))})]})}export{V as default};
