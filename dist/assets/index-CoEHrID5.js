import{c as S,h as k,r as p,i as v,m as D,p as b,ad as L,f as m,ae as w,af as T,j as e,C as y,b as W,d as A,e as N,U as R,ag as c,B as i,u as P,q as O,R as f}from"./index-DFBcCm7V.js";import{g,M as I}from"./messages-keBJKTKK.js";import{C as U,S as j,f as F}from"./permissionsUtil-CwlnOHuT.js";import{C}from"./circle-check-big-DUV3782x.js";import{T as z,P as B}from"./trash-2-st2Kg0im.js";import{I as H}from"./input-Cn8rvVGd.js";import{B as _,a as M}from"./breadcrumb-HxzqXsx2.js";import{S as K}from"./search-Y32gwDqf.js";import"./chevron-right-BpkOYE9z.js";const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],G=S("clock",q);const $=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],V=S("target",$),J=()=>{const s=k(),[l,d]=p.useState(""),n=v(D);p.useEffect(()=>{s(b())},[s]);const o=p.useMemo(()=>{if(!l.trim())return n;const a=l.toLowerCase();return n.filter(t=>t.title.toLowerCase().includes(a)||t.topic.toLowerCase().includes(a)||t.description.toLowerCase().includes(a))},[n,l]);return{searchTerm:l,setSearchTerm:d,filteredWorkshops:o,handleDelete:async a=>{if(confirm("Are you sure you want to delete this workshop? This action cannot be undone."))try{await s(T(a)).unwrap(),m.success(I.SUCCESS.DELETED)}catch(t){m.error(g(t,"Failed to delete workshop"))}},handleSchedule:async a=>{try{await s(w(a)).unwrap(),m.success("Workshop scheduled successfully")}catch(t){m.error(g(t,"Failed to schedule workshop"))}},handleComplete:async a=>{try{await s(L(a)).unwrap(),m.success("Workshop marked as completed")}catch(t){m.error(g(t,"Failed to complete workshop"))}}}};function Q({workshop:s,onEdit:l,onDelete:d,onSchedule:n,onComplete:o}){const h=a=>{const t={[c.DRAFT]:"bg-gray-100 text-gray-700",[c.PLANNED]:"bg-purple-100 text-purple-700",[c.SCHEDULED]:"bg-blue-100 text-blue-700",[c.IN_PROGRESS]:"bg-yellow-100 text-yellow-700",[c.COMPLETED]:"bg-green-100 text-green-700",[c.CANCELLED]:"bg-red-100 text-red-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[a]||t[c.DRAFT]}`,children:a.replace("_"," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")})},x=a=>{try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}},u=()=>{const{teams:a,departments:t,roles:r,locations:E}=s.targetAudience;return(a?.length||0)+(t?.length||0)+(r?.length||0)+(E?.length||0)};return e.jsxs(y,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(W,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(A,{className:"text-lg line-clamp-2",children:s.title}),h(s.status)]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.topic})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:x(s.scheduledDate)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.duration," minutes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsxs("span",{children:["Expected: ",s.expectedSize," participants"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsxs("span",{children:[u()," audience groups"]})]}),s.location&&e.jsxs("div",{className:"text-xs text-gray-400",children:["ðŸ“ ",s.location]}),s.linkedSurveyIds.length>0&&e.jsxs("div",{className:"text-xs text-gray-400",children:["ðŸ“Š Linked to ",s.linkedSurveyIds.length," survey",s.linkedSurveyIds.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.status===c.DRAFT&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:l,className:"flex-1",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(i,{variant:"default",size:"sm",onClick:n,className:"flex-1",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Schedule"]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:d,className:"text-destructive",children:e.jsx(z,{className:"w-4 h-4"})})]}),s.status===c.SCHEDULED&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:l,className:"flex-1",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(i,{variant:"default",size:"sm",onClick:o,className:"flex-1",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Complete"]})]}),(s.status===c.COMPLETED||s.status===c.CANCELLED)&&e.jsxs(i,{variant:"outline",size:"sm",onClick:l,className:"flex-1",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),"View"]})]})]})]})}function X(){return e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"},s))})]})}function ne(){const s=P(),{userRole:l}=O(),{searchTerm:d,setSearchTerm:n,filteredWorkshops:o,handleDelete:h,handleSchedule:x,handleComplete:u}=J(),a=v(r=>r.workshop.isLoading),t=r=>{s(f.WORKSHOPS.EDIT.replace(":id",r))};return a?e.jsx(X,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{children:e.jsx(M,{isCurrentPage:!0,children:"Workshops"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Workshops"}),F(l)&&e.jsxs(i,{onClick:()=>s(f.WORKSHOPS.CREATE),className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Create Workshop"]})]}),e.jsx("p",{className:"text-gray-600",children:"Plan and manage workshops based on survey insights and feedback."}),e.jsx(y,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(H,{type:"text",placeholder:"Search workshops by title, topic, or description...",value:d,onChange:r=>n(r.target.value),className:"pl-10"})]})})}),o.length===0?e.jsx(y,{children:e.jsx(N,{className:"py-8 text-center text-gray-500",children:d?"No workshops found matching your search.":"No workshops yet. Start by creating a new workshop!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(r=>e.jsx(Q,{workshop:r,onEdit:()=>t(r.id),onDelete:()=>h(r.id),onSchedule:()=>x(r.id),onComplete:()=>u(r.id)},r.id))})]})}export{ne as default};
